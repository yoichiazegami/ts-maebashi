M+ Stroke — テキスト内容適応型タイポグラフィエンジン
====================================================

＊注意
- 自然言語処理の技術については勉強しながらの作成なので、技術的な語用がおそらく全然正確ではない



作れるといいもの
1. テキスト自身がプロンプトとなり、自らの表示スタイルを選択する（ように見える）システム
- 鑑賞者が実際にテキストを入力できるので、完全に見せかけのコンセプトモデルではダメ
2. 1のための、連続的な文字スタイルの表現システム。既存のフォント（＝タイポグラフィのインフラ／離散的な選択肢）に依存せず、多様な文字スタイルを連続的に表現できる方法のプロトタイプ


... the medium-term impact of AI on type design kind of two main scenarios that were kind of appearing so the first is fully AI generated fonts fonts on the fly so kind of input a prompt something comes out I see this being something that could happen and I don't think the fonts are going to be particularly great but they might be the kind of thing that rudimentary people coming in with not a lot of font design knowledge would use all the time it would be like daffon on steroids um because you wouldn't even have to search for fonts anymore you'd just type in a prompt I see it happening not ideal for font designers but they will lack craftsmanship ...

... rate this was a guy who said the the third one could be fonts are no longer needed so I don't know if that's utopian or dystopian for me it would be dystopian uh but imagine a world where lettering isn't static but dynamically adapts to context a level of flexibility and precision that goes beyond what current fonts offer and admittedly I think that would take a hugely long time but it's interesting to see the opinions on where this could ...

完全AI生成フォント：プロンプトを入力すればフォントが出てくる。特に優れたフォントにはならないだろうが、フォントデザインの知識が少ない人が日常的に使うもの――「ステロイドを打ったdafont」のようなもの――になりうる。フォントを検索する必要すらなくなり、プロンプトを打つだけになる。フォントデザイナーにとっては理想的ではないが、クラフトマンシップには欠ける。

フォントが不要になる未来（ある人の意見）：レタリングが静的ではなく、文脈に応じて動的に適応する世界。現在のフォントが提供する以上の柔軟性と精度。実現には非常に長い時間がかかるだろうが、興味深い見解。


作ってみたもの
1. 入力されたテキストの意味・感情・文体・モチーフを分析し、テキスト自身に最適なスタイルを推測するシステム
- ユーザーからは、テキスト自身がプロンプトとなり、自らの表示スタイルを選択しているように見える
- 実際の内部には、目的や分析内容を記述した長いプロンプトがある。ユーザーによって入力されたテキストはプロンプトのごく一部なので、エンジニア側の感覚的には「テキスト自身がプロンプト」とは言いにくい

2. ストロークフォントのパスに対して機械的な処理を行い、多様な文字スタイルを表現できるツール
- 「M+ 1p」フォントのストロークパスデータ（オープンソース）を利用している。ストロークの太さや形状の変更、パスの変形処理、字間調整などを行えるようになっており、それぞれの程度をパラメーターとして持っている。現在は9次元
- バリアブルフォントと異なるのは、人間が描いた輪郭をもとに補完するのではなく、機械的な一律処理によって骨格や肉付きを変形させている点
- 複数のパラメーターが特定の噛み合い方をした結果として、「手書き風」「ゴシック風」「明朝風」「ファンテール風」「ゲバ文字風」など、特定のスタイルとして認識可能な形状が得られる
- ある程度広い範囲のスタイルを連続的に表現できる性質が重要なので、美しさや可読性はいったん度外視

- ベクター／ビットマップで直接文字を生成する方式も考えたが、ハードルがかなり高そうなのでいったん除外。
- 非装飾的文字の生成については、（Mary Faberのプレゼンでも言われている通り）現在も途上で、一般的なLLMや画像生成モデルのように汎用的に利用可能なものは存在しない
- 現在の汎用モデルは読める文字をある程度生成できるが、おそらくいくつかのオープンソースフォントを丸ごと特別に学習させているだけ。幅広い文字スタイルを表現できる性質よりも、読める文字を生成結果に組み込める性質が重視されている

- 今回の要点はAIによる文字生成そのものではなく、
- ストロークフォントのパスに依存せず、可能な文字スタイルの幅広く高品質に生成



テキストの内容から最適なスタイルを推測する方式

土台：k-NN方式（k近傍法、k-Nearest Neighbor algorithm）の学習
- 多様なテキストを用意し、それ対して最適と思われるスタイルを手動で選択することで、テキストとスタイルのペアのサンプルを作成した（現在200件程度）
- それによって、テキストの意味空間と、文字のスタイル空間の対応関係を学習させた
- 未知のテキストが入力された際、その対応関係をもとに計算して最適なスタイルを導き出すことができる
- 分析は形態素単位で行われ、文脈は考慮できない

補助：LLMによるパラメーターの調整（補助）
- OpenAIのAPI（gpt-4o-mini）を使用して分析する。ChatGPTに「この文字にはどんなパラメーターが最適だと思う？」と聞いているイメージ。その結果を加味してk-NNで導出したパラメーターを調整する
- 判断材料として、人間が書いた指示と、k-NN学習データの傾向を自然言語で記述させたものを与えている
- 形態素単位では導き出せない文脈やニュアンスをある程度捕捉できる
- 学習サンプル不足のせいでk-NNの確信度が低い場合、LLMが修正できる

